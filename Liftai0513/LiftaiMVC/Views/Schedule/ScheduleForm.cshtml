@model LiftaiMVC.Models.Schedule

@{
    ViewBag.Title = "Darbo grafikas";
}

<h2>Darbo grafikas</h2>

@if (HttpContext.Current.Session["Type"].ToString() == "Admin")
{
	using (Html.BeginForm("ScheduleForm", "Schedule", FormMethod.Post))
	{
		@Html.AntiForgeryToken()
		<div>Pasirinkti meistra, kuriam bus daromas grfikas</div>
		
		<hr />
		@Html.ValidationSummary(true, "", new { @class = "text-danger" })
		<div class="form-group">
			@Html.LabelFor(m => m.Date, htmlAttributes: new { @class = "control-label col-md-2" })
			<div class="col-md-10">
				@Html.EditorFor(m => m.Date, new { htmlAttributes = new { @class = "form-control" } })
				@Html.ValidationMessageFor(m => m.Date, "", new { @class = "text-danger" })
			</div>
		</div>
		
		<div class="form-group">
			@Html.LabelFor(m => m.Start, htmlAttributes: new { @class = "control-label col-md-2" })
			<div class="col-md-10">
				@Html.EditorFor(m => m.Start, new { htmlAttributes = new { @class = "form-control" } })
				@Html.ValidationMessageFor(m => m.Start, "", new { @class = "text-danger" })
			</div>
		</div>
		
		<div class="form-group">
			@Html.LabelFor(m => m.End, htmlAttributes: new { @class = "control-label col-md-2" })
			<div class="col-md-10">
				@Html.EditorFor(m => m.End, new { htmlAttributes = new { @class = "form-control" } })
				@Html.ValidationMessageFor(m => m.End, "", new { @class = "text-danger" })
			</div>
		</div>
		
		<div class="form-group">

			<div class="col-md-offset-2 col-md-10">
				<input type="submit" value="Išsaugoti" class="btn btn-default" />
			</div>
		</div>
	}
}
else 
{
	<div class="schedule-preview-container">
	@if (Model != null)
	{
		<div class="form-group form-disabled">
			@Html.LabelFor(m => m.Date, htmlAttributes: new { @class = "control-label col-md-4" })
			<div class="col-md-8">
				@Model.Date.ToString().Split(' ')[0]
			</div>
		</div>
		
		<div class="form-group form-disabled">
			@Html.LabelFor(m => m.Start, htmlAttributes: new { @class = "control-label col-md-4" })
			<div class="col-md-8">
				@Model.Start.ToString().Split(' ')[1]
			</div>
		</div>
		
		<div class="form-group form-disabled">
			@Html.LabelFor(m => m.End, htmlAttributes: new { @class = "control-label col-md-4" })
			<div class="col-md-8">
				@Model.End.ToString().Split(' ')[1]
			</div>
		</div>
	}
	else
	{
		<div class="control-label cl-md-4" style="padding-bottom: 20px">Šiandien laisva diena</div>
	}
	</div>
}

<div class="row">
	<p><a class="btn btn-default" href="~/Home/IndexHandyman">Grįžti į pradžią &raquo;</a></p>
</div>